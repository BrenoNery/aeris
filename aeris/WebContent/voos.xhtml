<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:s="http://jboss.com/products/seam/taglib">

	<ui:composition template="layout/template.xhtml">
			<ui:define name="body">			
				<rich:panel style="width:400px">
					<f:facet name="header">
						<h1>Cadastro de Voos</h1>
					</f:facet>
					
					<rich:messages />
					
					<h:form>
					
					<!--<s:validateAll> -->
					
						<h:panelGrid style="width: 90%">
							<s:decorate template="layout/edit.xhtml">
									<ui:define name="label">CÃ³digo:</ui:define>
								  <h:inputText value="#{voo.codigo}" required="true"/>
							</s:decorate>
							
							<rich:separator lineType="solid" height="2" />
							<rich:spacer height="20" />
							
							<rich:panel style="height: 100px">
								<f:facet name="header">
									Origem: #{vooHandler.trechoSelecionado.origem.nome}
								</f:facet>
								<s:decorate template="layout/edit.xhtml">
									<ui:define name="label">Dia:</ui:define>
									<rich:calendar value="#{voo.dataPartida}" datePattern="dd/MM/yyyy" /><br />
								</s:decorate>
								<s:decorate template="layout/edit.xhtml">
									<ui:define name="label">Hora:</ui:define>
									<h:inputText value="#{voo.horaPartida}">
										<f:convertDateTime type="time" pattern="HH:mm" />
									</h:inputText>
								</s:decorate>
							</rich:panel>
							
							<rich:spacer height="20" />
							
							<rich:panel style="height: 100px">
								<f:facet name="header">
									Destino: #{vooHandler.trechoSelecionado.destino.nome}
								</f:facet>
								<s:decorate template="layout/edit.xhtml">
									<ui:define name="label">Dia:</ui:define>
									<rich:calendar value="#{voo.dataChegada}" datePattern="dd/MM/yyyy" /><br />
								</s:decorate>
								<s:decorate template="layout/edit.xhtml">
									<ui:define name="label">Hora:</ui:define>
									<h:inputText value="#{voo.horaChegada}">
										<f:convertDateTime type="time" pattern="HH:mm" />
									</h:inputText>
								</s:decorate>
							</rich:panel>
							
							<rich:spacer height="20" />
							<h:commandButton action="#{vooHandler.salvarVoo}" value="Salvar" />
						</h:panelGrid>
						
					<!-- </s:validateAll> -->
								
					</h:form>
					
					<h:form>
						<rich:dataTable value="#{voos}" var="v" style="width: 60%">
							<f:facet name="header">Voos cadastrados</f:facet>
							
							<rich:column>
								<f:facet name="header">Codigo do Voo</f:facet>
								#{v.codigo}
							</rich:column>
														
							<rich:column>
								<f:facet name="header">Partida</f:facet>
								<h:outputText value="#{v.dataPartida}">
									<f:convertDateTime type="date" pattern="dd/MM/yyyy" />
								</h:outputText>	
								<h:outputText value=" - " />
								<h:outputText value="#{v.horaPartida}">
									<f:convertDateTime type="time" pattern="HH:mm" />
								</h:outputText>
							</rich:column>
							
							<rich:column>
								<f:facet name="header">Chegada</f:facet>
								<h:outputText value="#{v.dataChegada}">
									<f:convertDateTime type="date" pattern="dd/MM/yyyy"/>									
								</h:outputText>
								<h:outputText value=" - " />
								<h:outputText value="#{v.horaChegada}">
									<f:convertDateTime type="time" pattern="HH:mm"/>
								</h:outputText>
							</rich:column>
							
						</rich:dataTable>
					</h:form>
				</rich:panel>				
			</ui:define>
	</ui:composition>

</html>